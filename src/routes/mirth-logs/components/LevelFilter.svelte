<!-- runes -->
<script lang="ts">
	import { logStore } from '$stores/logStore.svelte';
	import type { LogLevel } from '$stores/logStore.svelte';

	function clearFilter() {
		logStore.setSelectedLevel(null);
	}

	function getLevelColor(level: LogLevel) {
		switch (level) {
			case 'ERROR':
				return '#dc2626';
			case 'WARN':
				return '#facc15';
			case 'INFO':
				return '#16a34a';
			case 'DEBUG':
				return '#64748b';
			default:
				return '#3b82f6';
		}
	}
</script>

{#if logStore.selectedLevel}
	<div class="mb-4 flex items-center gap-2">
		<span class="text-sm text-gray-600 dark:text-gray-300">Filtered by:</span>
		<div
			class="flex items-center gap-2 rounded-full px-3 py-1 text-sm font-medium text-white"
			style="background-color: {getLevelColor(logStore.selectedLevel)}"
		>
			<span>{logStore.selectedLevel}</span>
			<button
				onclick={clearFilter}
				class="bg-opacity-20 hover:bg-opacity-30 ml-1 rounded-full bg-white p-1 transition-all duration-200 dark:bg-gray-200"
			>
				Ã—
			</button>
		</div>
	</div>
{/if}
